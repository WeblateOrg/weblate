# SPDX-FileCopyrightText: 2024 Javier PÃ©rez <68171111+walpox@users.noreply.github.com>

paths:
  /hooks/update/{project}/:
    get:
      tags:
      - hooks
      summary: Triggers update of all components in a project (pulling from VCS and scanning for translation changes)
      description: '**Deprecated since version 2.6:** Please use `POST /api/projects/{project}/repository/` instead which works properly with authentication for ACL limited projects.'
      parameters:
      - $ref: '#/components/parameters/projectInPath'
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
      deprecated: true
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/update/{project}/{component}/:
    get:
      tags:
      - hooks
      summary: Triggers update of a component (pulling from VCS and scanning for translation changes)
      description: '**Deprecated since version 2.6:** Please use `POST /api/components/{project}/{component}/repository/` instead which works properly with authentication for ACL limited projects.'
      parameters:
      - $ref: '#/components/parameters/projectInPath'
      - $ref: '#/components/parameters/componentInPath'
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
      deprecated: true
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/github/:
    post:
      tags:
      - hooks
      summary: Special hook for handling GitHub notifications and automatically updating matching components
      description: |
        **Note:**

        GitHub includes direct support for notifying Weblate: enable Weblate service hook in repository settings and set the URL to the URL of your Weblate installation.

        **See also:**

          [Automatically receiving changes from GitHub on Weblate](https://docs.weblate.org/en/latest/admin/continuous.html#github-setup)

          [About webhooks on GitHub](https://docs.github.com/en/get-started/customizing-your-github-workflow/exploring-integrations/about-webhooks)

          [Enabling hooks for a whole Weblate instance with ENABLE_HOOKS](https://docs.weblate.org/en/latest/admin/config.html#std-setting-ENABLE_HOOKS)
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/gitlab/:
    post:
      tags:
      - hooks
      summary: Special hook for handling GitLab notifications and automatically updating matching components
      description: |
        **See also:**

        [Automatically receiving changes from GitLab on Weblate](https://docs.weblate.org/en/latest/admin/continuous.html#gitlab-setup)

        [About webhooks on GitLab](https://docs.gitlab.com/ee/user/project/integrations/webhooks.html)

        [Enabling hooks for a whole Weblate instance with ENABLE_HOOKS](https://docs.weblate.org/en/latest/admin/config.html#std-setting-ENABLE_HOOKS)
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/bitbucket/:
    post:
      tags:
      - hooks
      summary: Special hook for handling BitBucket notifications and automatically updating matching components
      description: |
        **See also:**

        [Automatically receiving changes from Bitbucket on Weblate](https://docs.weblate.org/en/latest/admin/continuous.html#bitbucket-setup)

        [About webhooks on BitBucket](https://support.atlassian.com/bitbucket-cloud/docs/manage-webhooks/)

        [Enabling hooks for a whole Weblate instance with ENABLE_HOOKS](https://docs.weblate.org/en/latest/admin/config.html#std-setting-ENABLE_HOOKS)
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/pagure/:
    post:
      tags:
      - hooks
      summary: Special hook for handling Pagure notifications and automatically updating matching components
      description: |
        **See also:**

        [Automatically receiving changes from Pagure on Weblate](https://docs.weblate.org/en/latest/admin/continuous.html#pagure-setup)

        [About webhooks on Pagure](https://docs.pagure.org/pagure/usage/using_webhooks.html)

        [Enabling hooks for a whole Weblate instance with ENABLE_HOOKS](https://docs.weblate.org/en/latest/admin/config.html#std-setting-ENABLE_HOOKS)
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/azure/:
    post:
      tags:
      - hooks
      summary: Special hook for handling Azure DevOps notifications and automatically updating matching components
      description: |
        **Note:**

        Please ensure that `Resource details to send` is set to All, otherwise Weblate will not be able to match your Azure repository.

        **See also:**

        [Automatically receiving changes from Azure DevOps](https://docs.weblate.org/en/latest/admin/continuous.html#azure-setup)

        [About webhooks on Azure Azure DevOps](https://learn.microsoft.com/en-us/azure/devops/service-hooks/services/webhooks?view=azure-devops)

        [Enabling hooks for a whole Weblate instance with ENABLE_HOOKS](https://docs.weblate.org/en/latest/admin/config.html#std-setting-ENABLE_HOOKS)
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/gitea/:
    post:
      tags:
      - hooks
      summary: Special hook for handling Gitea notifications and automatically updating matching components
      description: |
        [Automatically receiving changes from Gitea](https://docs.weblate.org/en/latest/admin/continuous.html#gitea-setup)

        [About webhooks on Gitea](https://docs.gitea.io/en-us/webhooks/)

        [Enabling hooks for a whole Weblate instance with ENABLE_HOOKS](https://docs.weblate.org/en/latest/admin/config.html#std-setting-ENABLE_HOOKS)
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

  /hooks/gitee/:
    post:
      tags:
      - hooks
      summary: Special hook for handling Gitee notifications and automatically updating matching components
      description: |
        [Automatically receiving changes from Gitee](https://docs.weblate.org/en/latest/admin/continuous.html#gitee-setup)

        [About webhooks on Gitee](https://gitee.com/help/categories/40)

        [Enabling hooks for a whole Weblate instance with ENABLE_HOOKS](https://docs.weblate.org/en/latest/admin/config.html#std-setting-ENABLE_HOOKS)
      responses:
        '200':
          $ref: '#/components/responses/OK'
        '401':
          $ref: '#/components/responses/Unauthorized'
      security:
      - TokenAuth: []
      servers:
      - url: https://hosted.weblate.org
        description: The official Weblate cloud instance
      - url: '{scheme}://{hostname}{port}'
        description: A Weblate instance of your choice
        variables:
          scheme:
            enum:
            - http
            - https
            default: https
            description: The HTTP protocol variant used for connecting to the API.
          hostname:
            default: ''
            description: The host where the Weblate API is exposed.
          port:
            default: ''
            description: '(Optional) The transport layer port number where the API is listening to, preceded by a colon. For example: ":8080".'

components:
  responses:
    OK:
      $ref: common.yaml#/components/responses/OK

    Unauthorized:
      $ref: common.yaml#/components/responses/Unauthorized

    NotFound:
      $ref: common.yaml#/components/responses/NotFound

  parameters:
    projectInPath:
      $ref: projects.yaml#/components/parameters/projectInPath

    componentInPath:
      $ref: components.yaml#/components/parameters/componentInPath
